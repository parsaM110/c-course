## Debuggers
- debuggers for IDEs like vscode , ...
- DDD (data display debugger)
- gdb : for gcc
- lldb : for clnag
- you should compile your code in debug format and no cpu optimization
```
gcc -g 06.c -o 06
```
run gcb it by tui (terminal user interface):
```
gcb -tui ./06
```
## gdb instructions
- run (r) 
- break (b) : break point

adding break points
```
b main
```
```
b 25
```
then run `r`, for clear the break points:
```
clear 25
```
- next : step over and goes to next line (see function as line)
- step (s) : step into function
- nexti : next instruction on ASM file
- stepi : jump and function call
- print (p) : print the variable like :
```
p head
```  
- [gdb print out put formats](https://ftp.gnu.org/old-gnu/Manuals/gdb/html_node/gdb_54.html) : e.g.
print as decimal
```bash
print /d head 
```
- print multiple variables:
```bash
p /a {head, tail, cur}
```
- x: [gdb memory exam](https://ftp.gnu.org/old-gnu/Manuals/gdb/html_node/gdb_55.html)
```
x tmp
```
for reading bytes you can:

- b : byte
```
x /12b tmp
```
- h: 2 byte
- w: 4 byte
- g : 8 byte

for reading in hex :
```
x /12xb tmp
```
the data in stored also in little endian fashion(10 is 0x0a and 4 first byte is the variable):
```
0x5555555592a0: 0x0a    0x00    0x00    0x00    0x00    0x00    0x00    0x00
0x5555555592a8: 0x00    0x00    0x00    0x00
```
- quit by first `kill` then 'q'
## security 
- core dumped is for reporting , if a program fails and kernel kill it , kernel whole of memory (heap, stack and code segment and data segment and dumped it to a file called core dump (all registers and states)) and this can be loaded to gdb to check the situation and replicate it
- core dump is security issue, because all confidential data is dumped too
- core dumped for application is only for memory part of application or is disabled or just for some specific vendors is enabled
- `rotated` is use for rotation of core dumped and then delete the file
- see user limitations:
```
ulimit -a
```
can be configured by sysconf in /etc/ulimit, or in systemd in newer systems
- `core file size              (blocks, -c) 0`  in `ulimit` shows core dumped is enabled or not
- `ulimit -c 5000` will give 5kB limit for allowed core dump
- unlimited : `ulimit -c unlimited` 
- these changes are temporary and unset with restart, change `etc/ulimit` or `systemd`

## sysctl
- see it with `vim /etc/sysctl.conf`
- manage it with `sysctl`
- see `cat /proc/` : is virtual file system (tempfs) which is not really exist , linux kernel uses to talk to user space
- `/dev/` and `/proc/`  is used to talk to linux kernel
- `/proc` have report of kernel settings and report:
```
cat /proc/cpuinfo 
```
this says how to save core dump config:
```
cat /proc/sys/kernel/core_pattern
```
output (it is piped with apport which is software for sending data to Canonical.ltc):
```
|/usr/share/apport/apport -p%p -s%s -c%c -d%d -P%P -u%u -g%g -- %E
```
change the saving core dump directory by:
```
echo '/tmp/lastcoredump' | sudo tee /proc/sys/kernel/core_pattern
````
- see core manual by `man core` to see params you can pass and have
- now put these to save additional data:
```
echo '/tmp/core-%u-%p-%E' | sudo tee /proc/sys/kernel/core_pattern
```
- this config is also temporary, go and change `core_pattern` param in `/etc/sysctl.conf`
> note that you have enabled `ulimit -c ulimited` for each active terminal you are trying to do core dump
- now if you (cause core dumped):
```bash
> ll /tmp/core*
-rw------- 1 ubuntu ubuntu 442368 Mar 25 12:05 '/tmp/core-1000-33943-!home!ubuntu!code!test!06'
```
- now with gdb and compiled version of your code you can check the stats:
```
gdb -tui ./06 '/tmp/core-1000-33943-!home!ubuntu!code!test!06'
```
now when you run:
```
#0  0x0000612e6126c1a9 in linklist_add (H=0x0, data=10) at 06.c:21
```
the error is on line 21 (you can print variables and check the states)
- for quit there is no need to kill because it is not running in core dump mode, just loading state